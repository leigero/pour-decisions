<tonic-modal (close)="close.emit()">
  <h2 class="modal-title">Edit Profile</h2>

  <div class="profile-picture-section">
    <img
      [src]="previewUrl || guest.profile_picture"
      alt="Profile preview"
      class="profile-preview"
    />
    <div class="upload-actions">
      <button class="pd-button secondary" (click)="triggerFileInput('user')">
        Take Photo
      </button>
      <button class="pd-button secondary" (click)="triggerFileInput()">
        Upload Photo
      </button>
    </div>
    <!-- Hidden file input -->
    <input
      type="file"
      #fileInput
      accept="image/*"
      (change)="onFileSelected($event)"
      style="display: none"
    />
  </div>

  <form (ngSubmit)="saveProfile()">
    <div class="form-group">
      <label for="displayName">Display Name</label>
      <input
        id="displayName"
        type="text"
        class="tonic-input"
        [(ngModel)]="displayName"
        name="displayName"
        required
      />
    </div>
    <div class="modal-actions">
      <button type="button" class="pd-button secondary" (click)="close.emit()">
        Cancel
      </button>
      <button type="submit" class="pd-button" [disabled]="isSaving()">
        {{ isSaving() ? "Saving..." : "Save" }}
      </button>
    </div>
  </form>
</tonic-modal>
