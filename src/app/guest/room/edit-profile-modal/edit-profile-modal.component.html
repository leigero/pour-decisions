<tonic-modal (close)="close.emit()">
  <h2 class="tonic-dialog__title">Edit Profile</h2>

  <div class="profile-picture-section">
    <img
      [src]="previewUrl || guest.profile_picture"
      alt="Profile picture"
      class="profile-picture"
    />
    <div class="tonic-dialog__actions">
      <button
        class="tonic-button--secondary"
        (click)="triggerFileInput('photo')"
      >
        Take Photo
      </button>
      <button class="tonic-button--secondary" (click)="triggerFileInput()">
        Upload Photo
      </button>
    </div>
    <!-- Hidden file input -->
    <input
      type="file"
      #fileInput
      accept="image/*"
      (change)="onFileSelected($event)"
      style="display: none"
    />
  </div>

  <form (ngSubmit)="saveProfile()">
    <div class="form-group">
      <label for="displayName">Display Name</label>
      <input
        id="displayName"
        type="text"
        class="tonic-input"
        [(ngModel)]="displayName"
        name="displayName"
        required
      />
    </div>
    <div class="tonic-dialog__actions">
      <button
        type="button"
        class="tonic-button--secondary"
        (click)="close.emit()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="tonic-button--primary"
        [disabled]="isSaving()"
      >
        {{ isSaving() ? "Saving..." : "Save" }}
      </button>
    </div>
  </form>
</tonic-modal>
